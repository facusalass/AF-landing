---
const { 
  rightinfo = "Acerca de", 
  rightCta = "Proyectos", 
  ctaHref = "#", 
  rightInicio = "Inicio" 
} = Astro.props;
---

<header class="fixed top-0 left-0 w-full z-50 bg-neutral-900/60 backdrop-blur-md shadow-lg text-white border-b border-white/10">
  <div class="mx-auto max-w-7xl h-20 px-8 flex items-center justify-between">
    
    <a href="/" class="font-mont text-white text-2xl tracking-tight">
      <span class="italic font-semibold">AF</span>
      <span class="not-italic font-normal">developers</span>
    </a>

    <div class="hidden md:flex items-center gap-12 font-poppins">
      <a href="#inicio" class="text-md text-neutral-300 hover:text-white transition cursor-pointer">{rightInicio}</a>
      <a href="#trabajos" class="text-md text-neutral-300 hover:text-white transition cursor-pointer">{rightinfo}</a>
      <a
        href={ctaHref}
        class="inline-flex items-center rounded-full border border-indigo-400/40 px-5 py-1.5 text-md font-medium text-indigo-100 hover:bg-gradient-to-r hover:from-indigo-400 hover:to-cyan-400 hover:text-slate-900 transition"
      >
        {rightCta}
      </a>
    </div>

    <button id="menu-toggle" class="md:hidden text-neutral-300 hover:text-white transition" aria-label="Abrir menú">
      <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7"></path></svg>
    </button>
  </div>

  <div 
    id="menu-overlay" 
    class="hidden md:hidden absolute top-20 left-0 w-full z-40 bg-slate-950/95 backdrop-blur-lg shadow-xl"
  >
    <div class="flex flex-col items-center py-8 gap-6">
      <a href="#inicio" class="text-xl text-neutral-300 hover:text-white transition cursor-pointer">{rightInicio}</a>
      <a href="#trabajos" class="text-xl text-neutral-300 hover:text-white transition cursor-pointer">{rightinfo}</a>
      <a
        href={ctaHref}
        class="inline-flex items-center rounded-full border border-indigo-400/40 px-6 py-2 text-lg font-medium text-indigo-100 hover:bg-gradient-to-r hover:from-indigo-400 hover:to-cyan-400 hover:text-slate-900 transition"
      >
        {rightCta}
      </a>
    </div>
  </div>
</header>

<script is:inline>
  const toggleBtn = document.getElementById('menu-toggle');
  const overlay = document.getElementById('menu-overlay');

  if (toggleBtn && overlay) {
    toggleBtn.addEventListener('click', (e) => {
      e.stopPropagation(); 
      overlay.classList.toggle('hidden');
    });
  }

  // Cerrar el menú si se hace clic en un link (para SPA)
  if (overlay) {
    overlay.querySelectorAll('a').forEach(link => {
      link.addEventListener('click', () => {
        overlay.classList.add('hidden');
      });
    });
  }

  // Cerrar el menú si se hace clic FUERA de él
  document.addEventListener('click', (e) => {
    // CORRECCIÓN AQUÍ: Eliminado el 'as Node'
    if (overlay && !overlay.classList.contains('hidden') && !overlay.contains(e.target) && e.target !== toggleBtn) {
      overlay.classList.add('hidden');
    }
  });
</script>